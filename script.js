// ================================
// TRADUCTOR (ESPA√ëOL/INGL√âS) - COMPLETO Y CORREGIDO
// ================================

const translations = {
  'es': {
    'brand': 'MI PORTAFOLIO',
    'menu-sobre': 'Sobre m√≠',
    'menu-habilidades': 'Habilidades',
    'menu-proyectos': 'Proyectos',
    'menu-testimonios': 'Testimonios',
    'menu-intereses': 'Intereses',
    'menu-contacto': 'Contacto',
    'hero-hola': '¬°Hola! Soy Gabriela Lissette Amaya Garay',
    'hero-interes-titulo': '√Åreas de inter√©s:',
    'hero-interes': '"Desarrollo Backend y Desarrollo de Apps M√≥viles"',
    'sobre-titulo': 'Sobre m√≠',
    'sobre-texto': 'Soy una persona responsable, puntual, con muchas ganas de progresar, aprendo r√°pido, capaz de trabajar en equipo. Mi objetivo en la empresa es demostrar mis conocimientos ayudando al funcionamiento de la misma y a su vez adquirir nuevas experiencias para seguir form√°ndome tanto personal como laboral.',
    'btn-descargar': 'Descargar CV',
    'habilidades-titulo': 'Habilidades',
    'habilidades-blandas': 'Habilidades Blandas',
    'habilidades-duras': 'Habilidades Duras',
    'lenguajes-titulo': 'Lenguajes de Programaci√≥n',
    'hab-trabajo': 'Trabajo en equipo',
    'hab-trabajo-desc': 'Capacidad para colaborar de manera efectiva con diferentes personas, aportando ideas y escuchando a los dem√°s.',
    'hab-tiempo': 'Gesti√≥n del tiempo',
    'hab-tiempo-desc': 'Organizaci√≥n y priorizaci√≥n de tareas para cumplir plazos de forma eficiente y sin perder calidad.',
    'hab-aprendizaje': 'Aprendizaje continuo',
    'hab-aprendizaje-desc': 'Inter√©s constante por adquirir nuevas habilidades y actualizar conocimientos en el √°rea profesional.',
    'hab-responsabilidad': 'Responsabilidad',
    'hab-responsabilidad-desc': 'Compromiso con los objetivos y cumplimiento de las tareas asignadas con seriedad y disciplina.',
    'hab-creatividad': 'Creatividad',
    'hab-creatividad-desc': 'Capacidad para generar ideas innovadoras y proponer soluciones originales a los problemas.',
    'hab-git': 'Manejo de Git',
    'hab-git-desc': 'Uso de comandos principales para control de versiones, trabajo en ramas y colaboraci√≥n en proyectos.',
    'hab-android': 'Uso de Android Studio',
    'hab-android-desc': 'Experiencia en la creaci√≥n de aplicaciones m√≥viles con Java y XML, incluyendo dise√±o de interfaces.',
    'hab-planillas': 'Elaboraci√≥n de planillas de pago',
    'hab-planillas-desc': 'Realizaci√≥n de planillas de pago con c√°lculo de comisiones, IVA, ISSS, AFP y renta.',
    'hab-contabilidad': 'Registro y contabilizaci√≥n de transacciones financieras',
    'hab-contabilidad-desc': 'Capacidad para registrar y clasificar operaciones en comprobantes contables (ingresos, egresos, compras y ventas).',
    'proyectos-titulo': 'PROYECTOS',
    'proyecto1-titulo': 'Adopta a un amigo',
    'proyecto1-desc': 'Plataforma web para un refugio de animales, enfocada en promover la adopci√≥n responsable de mascotas.',
    'proyecto2-titulo': 'Task Planner',
    'proyecto2-desc': 'Aplicaci√≥n m√≥vil para organizar tareas, con almacenamiento local y filtros para una mejor gesti√≥n del tiempo.',
    'proyecto3-titulo': 'Artesan√≠as Conchita',
    'proyecto3-desc': 'Prototipo de software empresarial que permite llevar el control completo de facturaci√≥n e inventario de la empresa.',
    'proyecto4-titulo': 'Sitio web de Artesan√≠as Conchita',
    'proyecto4-desc': 'Sitio web informativo que muestra los productos de la empresa',
    'ver-github': 'VER EN GITHUB',
    'ver-mas': 'Ver m√°s',
    'testimonios-titulo': 'Testimonios',
    'testimonio1': '"Trabaja con responsabilidad y mantiene una actitud positiva."',
    'testimonio2': '"Muy responsable y cumplida, siempre entrega sus tareas a tiempo."',
    'intereses-titulo': 'Intereses',
    'interes1-titulo': 'Desarrollo M√≥vil',
    'interes1-desc': 'Me interesa crear aplicaciones m√≥viles eficientes con Android Studio y explorar nuevas tecnolog√≠as m√≥viles.',
    'interes2-titulo': 'Manga',
    'interes2-desc': 'Disfruto leer novelas ficticias.',
    'interes3-titulo': 'M√∫sica',
    'interes3-desc': 'Me apasiona escuchar y descubrir g√©neros musicales diversos, lo que me inspira en la creatividad.',
    'interes4-titulo': 'F√∫tbol',
    'interes4-desc': 'El deporte que m√°s disfruto practicar y seguir, fomenta el trabajo en equipo y la disciplina.',
    'contacto-titulo': 'Contacto',
    'footer': '¬© 2025 Gabriela Amaya - Todos los derechos reservados',
    'marca-titulo': 'Marca Personal',
    'frase-marca': 'Aprender juntos es mejor que aprender solos',
    'marca-autor': '- Gabriela Amaya',
    
    // TRADUCCIONES NUEVAS PARA EL MODAL - COMPLETAS
    'description': 'Descripci√≥n',
    'features': 'Caracter√≠sticas',
    'technologies-used': 'Tecnolog√≠as Utilizadas',
    'programming-languages': 'Lenguajes de Programaci√≥n',
    'applications': 'Aplicaciones',
    'role-performed': 'Rol Desempe√±ado',
    'close': 'Cerrar',
    'role-fullstack': 'Desarrollador Full Stack',
    'role-mobile': 'Desarrollador M√≥vil',
    'role-analyst': 'Analista y Desarrollador',
    'role-frontend-backend': 'Desarrollador Frontend y Backend',
    'tech-languages': 'Lenguajes de Programaci√≥n',
    'tech-apps': 'Aplicaciones'
  },
  'en': {
    'brand': 'MY PORTFOLIO',
    'menu-sobre': 'About me',
    'menu-habilidades': 'Skills',
    'menu-proyectos': 'Projects',
    'menu-testimonios': 'Testimonials',
    'menu-intereses': 'Interests',
    'menu-contacto': 'Contact',
    'hero-hola': 'Hello! I am Gabriela Lissette Amaya Garay',
    'hero-interes-titulo': 'Areas of interest:',
    'hero-interes': '"Backend Development and Mobile App Development"',
    'sobre-titulo': 'About me',
    'sobre-texto': 'I am a responsible, punctual person with a strong desire to progress, I learn quickly, and I am capable of working in a team. My goal in the company is to demonstrate my knowledge by helping its operation. At the same time, I want to acquire new experiences to continue developing both personally and professionally.',
    'btn-descargar': 'Download CV',
    'habilidades-titulo': 'Skills',
    'habilidades-blandas': 'Soft Skills',
    'habilidades-duras': 'Hard Skills',
    'lenguajes-titulo': 'Programming Languages',
    'hab-trabajo': 'Teamwork',
    'hab-trabajo-desc': 'Ability to collaborate effectively with different people, contributing ideas and listening to others.',
    'hab-tiempo': 'Time management',
    'hab-tiempo-desc': 'Organization and prioritization of tasks to meet deadlines efficiently without losing quality.',
    'hab-aprendizaje': 'Continuous learning',
    'hab-aprendizaje-desc': 'Constant interest in acquiring new skills and updating knowledge in the professional field.',
    'hab-responsabilidad': 'Responsibility',
    'hab-responsabilidad-desc': 'Commitment to objectives and fulfillment of assigned tasks with seriousness and discipline.',
    'hab-creatividad': 'Creativity',
    'hab-creatividad-desc': 'Ability to generate innovative ideas and propose original solutions to problems.',
    'hab-git': 'Git Management',
    'hab-git-desc': 'Use of main commands for version control, branch work and project collaboration.',
    'hab-android': 'Android Studio Usage',
    'hab-android-desc': 'Experience in creating mobile applications with Java and XML, including interface design.',
    'hab-planillas': 'Payroll preparation',
    'hab-planillas-desc': 'Preparation of payrolls with calculation of commissions, VAT, ISSS, AFP and income tax.',
    'hab-contabilidad': 'Recording and accounting of financial transactions',
    'hab-contabilidad-desc': 'Ability to record and classify operations in accounting vouchers (income, expenses, purchases and sales).',
    'proyectos-titulo': 'PROJECTS',
    'proyecto1-titulo': 'Adopt a friend',
    'proyecto1-desc': 'Web platform for an animal shelter, focused on promoting responsible pet adoption.',
    'proyecto2-titulo': 'Task Planner',
    'proyecto2-desc': 'Mobile application to organize tasks, with local storage and filters for better time management.',
    'proyecto3-titulo': 'Conchita Crafts',
    'proyecto3-desc': 'Business software prototype that allows complete control of company billing and inventory.',
    'proyecto4-titulo': 'Conchita Crafts Website',
    'proyecto4-desc': 'Informative website that displays the company products',
    'ver-github': 'VIEW ON GITHUB',
    'ver-mas': 'View more',
    'testimonios-titulo': 'Testimonials',
    'testimonio1': '"Works with responsibility and maintains a positive attitude."',
    'testimonio2': '"Very responsible and diligent, always delivers her tasks on time."',
    'intereses-titulo': 'Interests',
    'interes1-titulo': 'Mobile Development',
    'interes1-desc': 'I am interested in creating efficient mobile applications with Android Studio and exploring new mobile technologies.',
    'interes2-titulo': 'Manga',
    'interes2-desc': 'I enjoy reading fictional novels.',
    'interes3-titulo': 'Music',
    'interes3-desc': 'I am passionate about listening to and discovering diverse music genres, which inspires my creativity.',
    'interes4-titulo': 'Soccer',
    'interes4-desc': 'The sport I most enjoy practicing and following, promotes teamwork and discipline.',
    'contacto-titulo': 'Contact',
    'footer': '¬© 2025 Gabriela Amaya - All rights reserved',
    'marca-titulo': 'Personal Brand',
    'frase-marca': '"Learning together is better than learning alone."',
    'marca-autor': '- Gabriela Amaya',
    
    // TRADUCCIONES NUEVAS PARA EL MODAL - COMPLETAS
    'description': 'Description',
    'features': 'Features',
    'technologies-used': 'Technologies Used',
    'programming-languages': 'Programming Languages',
    'applications': 'Applications',
    'role-performed': 'Role Performed',
    'close': 'Close',
    'role-fullstack': 'Full Stack Developer',
    'role-mobile': 'Mobile Developer',
    'role-analyst': 'Analyst and Developer',
    'role-frontend-backend': 'Frontend and Backend Developer',
    'tech-languages': 'Programming Languages',
    'tech-apps': 'Applications'
  }
};

let currentLang = 'es';

function changeLanguage(lang) {
  currentLang = lang;
  const elements = document.querySelectorAll('[data-lang]');

  elements.forEach(element => {
    const key = element.getAttribute('data-lang');
    if (translations[lang] && translations[lang][key]) {
      element.textContent = translations[lang][key];
    }
  });

  // Actualizar etiqueta de idioma
  const langLabel = document.getElementById('lang-label');
  if (langLabel) {
    langLabel.textContent = lang === 'es' ? 'Espa√±ol' : 'English';
  }

  // Si hay un modal abierto, actualizar su contenido
  if (modal && modal.style.display === 'block') {
    const activeProject = getActiveProject();
    if (activeProject) {
      updateProjectModal(activeProject);
    }
  }
}

// ================================
// MODO OSCURO/CLARO
// ================================

const toggleBtn = document.getElementById("mode-toggle");
const body = document.body;

if (toggleBtn) {
  // Verificar preferencia guardada (sin localStorage)
  const isDarkMode = true; // Por defecto modo oscuro

  if (!isDarkMode) {
    body.classList.add("light-mode");
    toggleBtn.textContent = "‚òÄÔ∏è";
  } else {
    body.classList.remove("light-mode");
    toggleBtn.textContent = "üåô";
  }

  toggleBtn.addEventListener("click", () => {
    body.classList.toggle("light-mode");

    if (body.classList.contains("light-mode")) {
      toggleBtn.textContent = "‚òÄÔ∏è";
    } else {
      toggleBtn.textContent = "üåô";
    }
  });
}

// ================================
// DATOS DE LOS PROYECTOS (TRADUCIDOS)
// ================================

const projectsData = {
    'adopta-amigo': {
        title: { 'es': 'Adopta a un amigo', 'en': 'Adopt a friend' },
        description: {
            'es': 'Plataforma web para un refugio de animales, enfocada en promover la adopci√≥n responsable de mascotas. Permite a los usuarios ver los animales disponibles, filtrar por caracter√≠sticas y solicitar adopciones de manera sencilla.',
            'en': 'Web platform for an animal shelter, focused on promoting responsible pet adoption. Allows users to view available animals, filter by characteristics, and request adoptions easily.'
        },
        features: {
            'es': [
                'Sistema de registro de usuarios',
                'Cat√°logo de animales disponibles para adopci√≥n',
                'Filtros por tipo, tama√±o y edad del animal',
                'Formulario de solicitud de adopci√≥n',
                'Panel de administraci√≥n para el refugio'
            ],
            'en': [
                'User registration system',
                'Catalog of animals available for adoption',
                'Filters by animal type, size and age',
                'Adoption request form',
                'Administration panel for the shelter'
            ]
        },
        technologies: [
            { name: 'C#', icon: 'fas fa-code', color: '#a179dc', type: 'language' },
            { name: 'ASP.NET', icon: 'fas fa-globe', color: '#512bd4', type: 'app' },
            { name: 'SQL Server', icon: 'fas fa-database', color: '#cc2927', type: 'app' },
            { name: 'Entity Framework', icon: 'fas fa-layer-group', color: '#004880', type: 'app' }
        ],
        role: { 'es': 'Desarrollador Full Stack', 'en': 'Full Stack Developer' },
        githubLink: 'https://github.com/gabrielaamaya/progral-2024-semi.git',
        images: [
            'Adoptaaunamigo.jpeg',
            'visual studio.png',
            'adopta un amigo-inicio.jpeg',
        ]
    },
    'task-planner': {
        title: { 'es': 'Task Planner', 'en': 'Task Planner' },
        description: {
            'es': 'Aplicaci√≥n m√≥vil para organizar tareas, con almacenamiento local y filtros para una mejor gesti√≥n del tiempo. Permite crear, editar y eliminar tareas, establecer prioridades y fechas de vencimiento.',
            'en': 'Mobile application to organize tasks, with local storage and filters for better time management. Allows creating, editing and deleting tasks, setting priorities and due dates.'
        },
        features: {
            'es': [
                'Creaci√≥n y gesti√≥n de tareas',
                'Categorizaci√≥n por prioridad',
                'Recordatorios y notificaciones',
                'Sincronizaci√≥n local sin necesidad de conexi√≥n a internet',
                'Interfaz intuitiva y f√°cil de usar'
            ],
            'en': [
                'Task creation and management',
                'Priority categorization',
                'Reminders and notifications',
                'Local synchronization without internet connection',
                'Intuitive and easy-to-use interface'
            ]
        },
        technologies: [
            { name: 'Java', icon: 'fab fa-java', color: '#ed8b00', type: 'language' },
            { name: 'Android Studio', icon: 'fab fa-android', color: '#3ddc84', type: 'app' },
            { name: 'SQLite', icon: 'fas fa-database', color: '#003b57', type: 'app' }
        ],
        role: { 'es': 'Desarrollador M√≥vil', 'en': 'Mobile Developer' },
        githubLink: 'https://github.com/gabrielaamaya/Prograll-Semi-2025.git',
        images: [
            'task planner.png',
            'task planner login.jpeg',
            'task planner pantalla principal.jpeg',
            'task planner grafica.jpeg',
            'notificaciones.jpeg'
        ]
    },
    'artesanias-conchita': {
        title: { 'es': 'Artesan√≠as Conchita', 'en': 'Conchita Crafts' },
        description: {
            'es': 'Prototipo de software empresarial que permite llevar el control completo de facturaci√≥n e inventario de la empresa. Facilita la gesti√≥n de productos, clientes, proveedores y ventas.',
            'en': 'Business software prototype that allows complete control of company billing and inventory. Facilitates product, customer, supplier and sales management.'
        },
        features: {
            'es': [
                'Gesti√≥n de inventario y productos',
                'Control de ventas y facturaci√≥n',
                'Registro de clientes y proveedores',
                'Reportes y estad√≠sticas de ventas',
                'Sistema de usuarios y permisos'
            ],
            'en': [
                'Inventory and product management',
                'Sales and billing control',
                'Customer and supplier registration',
                'Sales reports and statistics',
                'User and permissions system'
            ]
        },
        technologies: [
            { name: 'C#', icon: 'fas fa-code', color: '#a179dc', type: 'language' },
            { name: 'Windows Forms', icon: 'fab fa-windows', color: '#0078d7', type: 'app' },
            { name: 'SQL Server', icon: 'fas fa-database', color: '#cc2927', type: 'app' }
        ],
        role: { 'es': 'Analista y Desarrollador', 'en': 'Analyst and Developer' },
        githubLink: 'https://github.com/gabrielaamaya/Artesanias-Conchitas.git',
        images: [
            'Prototipo de Artesanias Conchita.jpeg',
            'login-artesania.jpeg',
            'ayuda-artesania.jpeg'
        ]
    },
    'artesanias-web': {
        title: { 'es': 'Sitio web de Artesan√≠as Conchita', 'en': 'Conchita Crafts Website' },
        description: {
            'es': 'Sitio web informativo que muestra los productos de la empresa. Permite a los clientes conocer la historia de la empresa, ver el cat√°logo de productos y contactar con la empresa.',
            'en': 'Informative website that displays the company products. Allows customers to learn about the company history, view the product catalog and contact the company.'
        },
        features: {
            'es': [
                'Dise√±o responsive adaptado a dispositivos m√≥viles',
                'Galer√≠a de productos con categor√≠as',
                'Formulario de contacto',
                'Informaci√≥n sobre la empresa y su historia',
                'Integraci√≥n con redes sociales'
            ],
            'en': [
                'Responsive design adapted to mobile devices',
                'Product gallery with categories',
                'Contact form',
                'Information about the company and its history',
                'Social media integration'
            ]
        },
        technologies: [
            { name: 'Python', icon: 'fab fa-python', color: '#3776ab', type: 'language' },
            { name: 'HTML/CSS/JS', icon: 'fab fa-html5', color: '#e34f26', type: 'language' },
            { name: 'Django', icon: 'fas fa-code', color: '#092e20', type: 'app' },
            { name: 'Bootstrap', icon: 'fab fa-bootstrap', color: '#7952b3', type: 'app' }
        ],
        role: { 'es': 'Desarrollador Frontend y Backend', 'en': 'Frontend and Backend Developer' },
        githubLink: 'https://github.com/gabrielaamaya/Artesanias-Conchita-sitio-web.git',
        images: [
            'Prototipo de Artesanias Conchita.jpeg',
            'artesanias-web-1.jpg',
            'artesanias-web-2.jpg'
        ]
    }
};

// ================================
// FUNCI√ìN PARA ACTUALIZAR PROYECTOS EN EL MODAL - CORREGIDA
// ================================

function updateProjectModal(projectId) {
    const project = projectsData[projectId];
    
    if (!project || !modal) return;
    
    // Actualizar contenido del modal seg√∫n el idioma actual
    modalTitle.textContent = project.title[currentLang];
    modalDescription.textContent = project.description[currentLang];
    modalRole.textContent = project.role[currentLang];
    modalGitHubLink.href = project.githubLink;
    
    // Actualizar caracter√≠sticas seg√∫n el idioma
    modalFeatures.innerHTML = '';
    project.features[currentLang].forEach(feature => {
        const li = document.createElement('li');
        li.textContent = feature;
        modalFeatures.appendChild(li);
    });
    
    // Actualizar tecnolog√≠as - Separar lenguajes y aplicaciones
    const modalTechLanguages = document.getElementById('modalTechLanguages');
    const modalTechApps = document.getElementById('modalTechApps');
    
    if (modalTechLanguages && modalTechApps) {
        modalTechLanguages.innerHTML = '';
        modalTechApps.innerHTML = '';
        
        // Actualizar subt√≠tulos seg√∫n el idioma
        const languagesSubtitle = document.querySelector('.tech-subtitle[data-lang="programming-languages"]');
        const appsSubtitle = document.querySelector('.tech-subtitle[data-lang="applications"]');
        
        if (languagesSubtitle) {
            languagesSubtitle.textContent = translations[currentLang]['programming-languages'];
        }
        if (appsSubtitle) {
            appsSubtitle.textContent = translations[currentLang]['applications'];
        }
        
        project.technologies.forEach(tech => {
            const techItem = document.createElement('div');
            techItem.className = 'tech-item';
            techItem.innerHTML = `
                <i class="${tech.icon}" style="color: ${tech.color};"></i>
                <span>${tech.name}</span>
            `;
            
            // Clasificar en lenguajes o aplicaciones
            if (tech.type === 'language') {
                modalTechLanguages.appendChild(techItem);
            } else {
                modalTechApps.appendChild(techItem);
            }
        });
    }
    
    // Actualizar galer√≠a de im√°genes
    const galleryContainer = modalGallery.querySelector('.gallery-container');
    const indicatorsContainer = document.getElementById('galleryIndicators');
    
    if (galleryContainer && indicatorsContainer) {
        galleryContainer.innerHTML = '';
        indicatorsContainer.innerHTML = '';
        
        project.images.forEach((image, index) => {
            const img = document.createElement('img');
            img.src = image;
            img.alt = `${project.title[currentLang]} - Image ${index + 1}`;
            
            if (index === 0) {
                img.classList.add('active');
            } else if (index === 1) {
                img.classList.add('next');
            } else {
                img.classList.add('hidden');
            }
            
            galleryContainer.appendChild(img);
            
            const indicator = document.createElement('span');
            indicator.classList.add('indicator');
            if (index === 0) indicator.classList.add('active');
            indicator.onclick = () => goToImage(index);
            indicatorsContainer.appendChild(indicator);
        });
        
        galleryImages = galleryContainer.querySelectorAll('img');
        galleryIndicators = indicatorsContainer.querySelectorAll('.indicator');
        totalImages = project.images.length;
        currentIndex = 0;
    }
}

// ================================
// GALER√çA 3D - VARIABLES GLOBALES
// ================================

let currentIndex = 0;
let totalImages = 0;
let galleryImages = [];
let galleryIndicators = [];

// ================================
// FUNCIONES DE GALER√çA 3D
// ================================

function updateGallery() {
  galleryImages.forEach((img, index) => {
    img.classList.remove('active', 'prev', 'next', 'hidden');
    
    if (index === currentIndex) {
      img.classList.add('active');
    } else if (index === (currentIndex - 1 + totalImages) % totalImages) {
      img.classList.add('prev');
    } else if (index === (currentIndex + 1) % totalImages) {
      img.classList.add('next');
    } else {
      img.classList.add('hidden');
    }
  });
  
  galleryIndicators.forEach((ind, index) => {
    ind.classList.toggle('active', index === currentIndex);
  });
}

function nextImage() {
  currentIndex = (currentIndex + 1) % totalImages;
  updateGallery();
}

function prevImage() {
  currentIndex = (currentIndex - 1 + totalImages) % totalImages;
  updateGallery();
}

function goToImage(index) {
  currentIndex = index;
  updateGallery();
}

// ================================
// FUNCIONALIDAD DEL MODAL
// ================================

let modal = null;
let modalTitle = null;
let modalDescription = null;
let modalFeatures = null;
let modalRole = null;
let modalGitHubLink = null;
let modalGallery = null;
let closeModalBtn = null;

// Funci√≥n para obtener el proyecto activo
function getActiveProject() {
    const activeCard = document.querySelector('.card.active');
    return activeCard ? activeCard.getAttribute('data-project') : null;
}

// Funci√≥n para abrir el modal
function openProjectModal(projectId) {
    // Marcar el proyecto como activo
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        card.classList.remove('active');
        if (card.getAttribute('data-project') === projectId) {
            card.classList.add('active');
        }
    });
    
    updateProjectModal(projectId);
    
    // Mostrar modal
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
}

// Funci√≥n para cerrar el modal
function closeProjectModal() {
    if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
        
        // Remover clase activa
        const activeCard = document.querySelector('.card.active');
        if (activeCard) {
            activeCard.classList.remove('active');
        }
    }
}

// ================================
// INICIALIZACI√ìN
// ================================

document.addEventListener('DOMContentLoaded', function() {
    // Inicializar elementos del DOM
    modal = document.getElementById('projectModal');
    modalTitle = document.getElementById('modalTitle');
    modalDescription = document.getElementById('modalDescription');
    modalFeatures = document.getElementById('modalFeatures');
    modalRole = document.getElementById('modalRole');
    modalGitHubLink = document.getElementById('modalGitHubLink');
    modalGallery = document.getElementById('modalGallery');
    closeModalBtn = document.querySelector('.close-modal');

    // Event listener para cerrar modal
    if (closeModalBtn) {
        closeModalBtn.addEventListener('click', closeProjectModal);
    }

    if (modal) {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeProjectModal();
            }
        });
    }

    // Event listeners para botones "Ver m√°s"
    const verMasButtons = document.querySelectorAll('.btn-more');
    verMasButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            const card = this.closest('.card');
            if (card) {
                const projectId = card.getAttribute('data-project');
                if (projectId) {
                    openProjectModal(projectId);
                }
            }
        });
    });

    // Bot√≥n de cambio de idioma
    const langToggle = document.getElementById('lang-toggle');
    if (langToggle) {
        langToggle.addEventListener('click', function() {
            const newLang = currentLang === 'es' ? 'en' : 'es';
            changeLanguage(newLang);
        });
    }

    // Event listeners para controles de galer√≠a
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');

    if (prevBtn) {
        prevBtn.addEventListener('click', prevImage);
    }

    if (nextBtn) {
        nextBtn.addEventListener('click', nextImage);
    }

    // Cerrar modal con tecla Escape
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeProjectModal();
        }
    });

    // Inicializar traducciones
    changeLanguage('es');
});

// Funci√≥n para scroll suave
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}